# Backup Manager

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π —Å–∏—Å—Ç–µ–º—É —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –ø–æ–ª–Ω–æ–≥–æ –∏ –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω–æ–≥–æ –±—ç–∫–∞–ø–∞, –∞ —Ç–∞–∫–∂–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º NFS.

## üìå –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
- üîπ –ü–æ–ª–Ω—ã–π (`full`) –∏ –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω—ã–π (`incremental`) –±—ç–∫–∞–ø
- üîπ –ê—Ä—Ö–∏–≤–∞—Ü–∏—è —Å—Ç–∞—Ä—ã—Ö –±—ç–∫–∞–ø–æ–≤
- üîπ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ NFS –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Ä–µ–∑–µ—Ä–≤–Ω—ã—Ö –∫–æ–ø–∏–π
- üîπ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º NFS
- üîπ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–π

## üõ†Ô∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞
1. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:
   ```sh
   git clone https://github.com/catfromnewjercy/py-backup-nfs.git
   cd py-backup-nfs
   ```
2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (–µ—Å–ª–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ):
   ```sh
   pip install -r requirements.txt
   ```
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –≤–∞—Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω `rsync`, `nfs-utils` (–∏–ª–∏ `nfs-common` –¥–ª—è Ubuntu/Debian):
   ```sh
   sudo apt install rsync nfs-common  # –¥–ª—è Ubuntu/Debian
   ```

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
–†–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª `config.py` –¥–ª—è —É–∫–∞–∑–∞–Ω–∏—è –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤:

```python
SOURCE_DIRECTORY_LIST = ["/DATASET/project/scada/local"]
SERVER_NAME = socket.gethostname()
NFS_SERVER = "X.X.X.X"
NFS_PATH = "/NFS"
MOUNT_PATH = "/mnt/nfs"
BACKUPS_LOCATION = "/backups"
DC_ID = "dc1"
TARGET_DIRECTORY = f"{MOUNT_PATH}{BACKUPS_LOCATION}/{DC_ID}/{SERVER_NAME}"
```

## üöÄ –ó–∞–ø—É—Å–∫
–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ä–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –Ω—É–∂–Ω–æ–º —Ä–µ–∂–∏–º–µ:

```sh
python main.py --mode full          # –¢–æ–ª—å–∫–æ –ø–æ–ª–Ω—ã–π –±—ç–∫–∞–ø
python main.py --mode incremental   # –¢–æ–ª—å–∫–æ –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω—ã–π –±—ç–∫–∞–ø
python main.py --mode all           # –ü–æ–ª–Ω—ã–π + –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω—ã–π –±—ç–∫–∞–ø (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
```

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
```
py-backup-nfs/
‚îú‚îÄ‚îÄ archive.py        # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞—Ä—Ö–∏–≤–∞–º–∏ —Å—Ç–∞—Ä—ã—Ö –±—ç–∫–∞–ø–æ–≤
‚îú‚îÄ‚îÄ backup.py         # –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è
‚îú‚îÄ‚îÄ config.py         # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞
‚îú‚îÄ‚îÄ main.py           # –ì–ª–∞–≤–Ω—ã–π —Å–∫—Ä–∏–ø—Ç –¥–ª—è –∑–∞–ø—É—Å–∫–∞
‚îú‚îÄ‚îÄ nfs.py            # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ NFS –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º
‚îú‚îÄ‚îÄ backup.log        # –§–∞–π–ª –ª–æ–≥–æ–≤
‚îî‚îÄ‚îÄ README.md         # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞
```

## üìù –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
–õ–æ–≥–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ —Ñ–∞–π–ª–µ `backup.log`. –í —Å–ª—É—á–∞–µ –æ—à–∏–±–æ–∫ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —ç—Ç–æ—Ç —Ñ–∞–π–ª:
```sh
cat backup.log
```

## üìú –õ–∏—Ü–µ–Ω–∑–∏—è
–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –ø–æ–¥ –ª–∏—Ü–µ–Ω–∑–∏–µ–π MIT. –°–º. [LICENSE](LICENSE) –¥–ª—è –¥–µ—Ç–∞–ª–µ–π.

